function js_beautify(T,r,_,t){var e,K,n,a,E,O,R,f,h,c,i,N,A,u,o,l,C,D,s,L;function P(){for(;K.length&&(" "===K[K.length-1]||K[K.length-1]===h);)K.pop()}function S(T){if(T=void 0===T||T,P(),K.length){"\n"===K[K.length-1]&&T||K.push("\n");for(var r=0;r<t;r++)K.push(h)}}function g(){var T=K.length?K[K.length-1]:" ";" "!==T&&"\n"!==T&&T!==h&&K.push(" ")}function B(){K.push(n)}function M(){t++}function b(){t&&t--}function X(T){f.push(R),R=T}function k(){D="DO_BLOCK"===R,R=f.pop()}function W(T,r){for(var _=0;_<r.length;_++)if(r[_]===T)return!0;return!1}function p(){var T=0,r="";do{if(A>=e.length)return["","TK_EOF"];r=e.charAt(A),A+=1,"\n"===r&&(T+=1)}while(W(r,c));if(T>1)for(var _=0;_<2;_++)S(0===_);var t=1===T;if(W(r,i)){if(A<e.length)for(;W(e.charAt(A),i)&&(r+=e.charAt(A),(A+=1)!==e.length););return A!==e.length&&r.match(/^[0-9]+[Ee]$/)&&"-"===e.charAt(A)?(A+=1,[r+="-"+p()[0],"TK_WORD"]):"in"===r?[r,"TK_OPERATOR"]:[r,"TK_WORD"]}if("("===r||"["===r)return[r,"TK_START_EXPR"];if(")"===r||"]"===r)return[r,"TK_END_EXPR"];if("{"===r)return[r,"TK_START_BLOCK"];if("}"===r)return[r,"TK_END_BLOCK"];if(";"===r)return[r,"TK_END_COMMAND"];if("/"===r){var K="";if("*"===e.charAt(A)){if((A+=1)<e.length)for(;("*"!==e.charAt(A)||!e.charAt(A+1)||"/"!==e.charAt(A+1))&&A<e.length&&(K+=e.charAt(A),!((A+=1)>=e.length)););return A+=2,["/*"+K+"*/","TK_BLOCK_COMMENT"]}if("/"===e.charAt(A)){for(K=r;"\r"!==e.charAt(A)&&"\n"!==e.charAt(A)&&(K+=e.charAt(A),!((A+=1)>=e.length)););return A+=1,t&&S(),[K,"TK_COMMENT"]}}if("'"===r||'"'===r||"/"===r&&("TK_WORD"===a&&"return"===E||"TK_START_EXPR"===a||"TK_END_BLOCK"===a||"TK_OPERATOR"===a||"TK_EOF"===a||"TK_END_COMMAND"===a)){var n=r,O=!1;if(r="",A<e.length)for(;(O||e.charAt(A)!==n)&&(r+=e.charAt(A),O=!O&&"\\"===e.charAt(A),!((A+=1)>=e.length)););return A+=1,"TK_END_COMMAND"===a&&S(),[n+r+n,"TK_STRING"]}if(W(r,N)){for(;A<e.length&&W(r+e.charAt(A),N)&&(r+=e.charAt(A),!((A+=1)>=e.length)););return[r,"TK_OPERATOR"]}return[r,"TK_UNKNOWN"]}for(_=_||" ",r=r||4,h="";r--;)h+=_;for(e=T,O="",a="TK_START_EXPR",E="",K=[],D=!1,s=!1,L=!1,c="\n\r\t ".split(""),i="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789_$".split(""),N="+ - * / % & ++ -- = += -= *= /= %= == === != !== > < >= <= >> << >>> >>>= >>= <<= && &= | || ! !! , : ? ^ ^= |=".split(" "),u="continue,try,throw,return,var,if,switch,case,default,for,while,break,function".split(","),f=[R="BLOCK"],t=t||0,A=0,o=!1;;){var v=p();if(n=v[0],"TK_EOF"===(C=v[1]))break;switch(C){case"TK_START_EXPR":s=!1,X("EXPRESSION"),"TK_END_EXPR"===a||"TK_START_EXPR"===a||("TK_WORD"!==a&&"TK_OPERATOR"!==a?g():W(O,u)&&"function"!==O&&g()),B();break;case"TK_END_EXPR":B(),k();break;case"TK_START_BLOCK":X("do"===O?"DO_BLOCK":"BLOCK"),"TK_OPERATOR"!==a&&"TK_START_EXPR"!==a&&("TK_START_BLOCK"===a?S():g()),B(),M();break;case"TK_END_BLOCK":"TK_START_BLOCK"===a?(P(),b()):(b(),S()),B(),k();break;case"TK_WORD":if(D){g(),B(),g();break}if("case"===n||"default"===n){":"===E?K.length&&K[K.length-1]===h&&K.pop():(b(),S(),M()),B(),o=!0;break}l="NONE","TK_END_BLOCK"===a?W(n.toLowerCase(),["else","catch","finally"])?(l="SPACE",g()):l="NEWLINE":"TK_END_COMMAND"!==a||"BLOCK"!==R&&"DO_BLOCK"!==R?"TK_END_COMMAND"===a&&"EXPRESSION"===R?l="SPACE":"TK_WORD"===a?l="SPACE":"TK_START_BLOCK"===a?l="NEWLINE":"TK_END_EXPR"===a&&(g(),l="NEWLINE"):l="NEWLINE","TK_END_BLOCK"!==a&&W(n.toLowerCase(),["else","catch","finally"])?S():W(n,u)||"NEWLINE"===l?"else"===E?g():("TK_START_EXPR"!==a&&"="!==E||"function"!==n)&&("TK_WORD"!==a||"return"!==E&&"throw"!==E?"TK_END_EXPR"!==a?"TK_START_EXPR"===a&&"var"===n||":"===E||("if"===n&&"TK_WORD"===a&&"else"===O?g():S()):W(n,u)&&")"!==E&&S():g()):"SPACE"===l&&g(),B(),O=n,"var"===n&&(s=!0,L=!1);break;case"TK_END_COMMAND":B(),s=!1;break;case"TK_STRING":"TK_START_BLOCK"===a||"TK_END_BLOCK"===a?S():"TK_WORD"===a&&g(),B();break;case"TK_OPERATOR":var I=!0,w=!0;if(s&&","!==n&&(L=!0,":"===n&&(s=!1)),":"===n&&o){B(),S();break}if(o=!1,","===n){s?L?(B(),S(),L=!1):(B(),g()):"TK_END_BLOCK"===a?(B(),S()):"BLOCK"===R?(B(),S()):(B(),g());break}"--"===n||"++"===n?";"===E?(I=!0,w=!1):(I=!1,w=!1):"!"===n&&"TK_START_EXPR"===a?(I=!1,w=!1):"TK_OPERATOR"===a?(I=!1,w=!1):"TK_END_EXPR"===a?(I=!0,w=!0):"."===n?(I=!1,w=!1):":"===n&&(I=!!E.match(/^\d+$/)),I&&g(),B(),w&&g();break;case"TK_BLOCK_COMMENT":S(),B(),S();break;case"TK_COMMENT":g(),B(),S();break;case"TK_UNKNOWN":B()}a=C,E=n}return K.join("")}