$(function(){$.fn.manhuaDialog=function(t){t=$.extend({Event:"click",title:"title",type:"text",content:"content",width:500,height:400,scrollTop:200,isAuto:!1,time:2e3,isClose:!1,timeOut:2e3},t);$("body").prepend("<div id='floatBoxBg'></div><div id='floatBox' class='floatBox'><div class='title'><h4></h4><span id='closeDialog'>X</span></div><div class='content'></div></div>");var e,i,o=$(this),n=$("#floatBoxBg"),a=$("#floatBox .title h4"),l=$("#floatBox .content"),c=$("#floatBox"),h=$("#closeDialog");h.live("click",function(){n.animate({opacity:"0"},"normal",function(){$(this).hide()}),c.animate({top:$(document).scrollTop()-parseInt(t.height)+"px"},"normal",function(){$(this).hide()}),i&&clearTimeout(i),e&&clearTimeout(e)}),l.css("height",parseInt(t.height)-70),o.live(t.Event,function(i){switch(a.html(t.title),t.type){case"url":l.ajaxStart(function(){$(this).html("loading...")}),$.get(t.content,function(t){l.html(t)});break;case"text":l.html(t.content);break;case"id":l.html($("#"+t.content).html());break;case"iframe":l.html('<iframe src="'+t.content+'" width="100%" height="'+(parseInt(t.height)-70)+'px" scrolling="auto" frameborder="0" marginheight="0" marginwidth="0"></iframe>');break;default:l.html(t.content)}n.show(),n.animate({opacity:"0.5"},"normal"),c.css({display:"block",left:$(document).width()/2-parseInt(t.width)/2+"px",top:$(document).scrollTop()-parseInt(t.height)+"px",width:t.width,height:t.height}),c.animate({top:$(document).scrollTop()+t.scrollTop+"px"},"normal"),t.isClose&&(e=setTimeout(function(){h.trigger("click"),clearTimeout(e)},t.timeOut))}),t.isAuto&&(i=setTimeout(function(){o.trigger(t.Event),clearTimeout(i)},t.time))}});